<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Caesar Cipher ‚Äî CryptoPlayground</title>
  <style>
    :root{--bg:#071019;--panel:#0b1a26;--accent:#39ffca;--muted:#7fd3c1;--arrow:#ff7b00}
    *{box-sizing:border-box}
    body{font-family:Inter,Segoe UI,Roboto,system-ui,monospace;margin:0;background:linear-gradient(180deg,#04111a 0%,#071019 100%);color:var(--accent);padding:28px}
    .wrap{max-width:880px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px}
    h1{margin:0;font-size:20px}
    p.lead{color:var(--muted);margin:6px 0 22px}
    .panel{background:var(--panel);padding:18px;border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,.6)}
    label{display:block;color:var(--muted);font-size:13px;margin-bottom:8px}
    textarea,input{background:#06101a;color:var(--accent);border:1px solid rgba(255,255,255,.04);padding:10px;border-radius:8px;width:100%;font-family:inherit}
    textarea{min-height:120px;resize:vertical}
    .controls{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    .row{display:flex;gap:8px;align-items:center}
    button{background:transparent;border:1px solid var(--accent);color:var(--accent);padding:8px 12px;border-radius:8px;cursor:pointer}
    button.primary{background:var(--accent);color:#001617;border:none}
    .output{white-space:pre-wrap;font-family:inherit;padding:12px;border-radius:8px;background:#041018;border:1px solid rgba(255,255,255,.03);margin-top:12px}
    .alphabet{display:flex;gap:6px;flex-wrap:wrap;margin-top:14px;position:relative}
    .letter{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;background:#021214;border:1px solid rgba(255,255,255,.03);font-weight:600;position:relative}
    .arrow{position:absolute;top:40px;height:16px;width:2px;background:var(--arrow);animation:pop 0.3s ease-out;}
    @keyframes pop{from{transform:scale(0);opacity:0;}to{transform:scale(1);opacity:1;}}
    .controls-bottom{display:flex;gap:8px;flex-wrap:wrap;margin-top:12px}
    .hint{color:var(--muted);font-size:13px;margin-top:8px}
    .highlight{background:linear-gradient(90deg, rgba(57,255,202,0.12), rgba(57,255,202,0.06));border-color:var(--accent)}
    footer{color:var(--muted);font-size:13px;margin-top:16px}
    @media(max-width:620px){.controls{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üîê CryptoPlayground ‚Äî Caesar Cipher</h1>
    </header>
    <p class="lead">Interactive Caesar cipher demo. Type text, choose a shift, and visualize how characters are transformed with animated arrows.</p>

    <div class="panel">
      <label for="inputText">Plaintext / Ciphertext</label>
      <textarea id="inputText" placeholder="Type or paste text here...">Hello, CryptoPlayground!</textarea>

      <div class="controls">
        <div>
          <label for="shiftRange">Shift: <span id="shiftValue">3</span></label>
          <input id="shiftRange" type="range" min="0" max="25" value="3" />
        </div>

        <div>
          <label for="mode">Mode</label>
          <div class="row">
            <select id="mode">
              <option value="enc">Encrypt</option>
              <option value="dec">Decrypt</option>
            </select>
            <button id="visualizeBtn">Visualize</button>
          </div>
        </div>
      </div>

      <div class="controls-bottom">
        <button id="runBtn" class="primary">Run</button>
        <button id="stepBtn">Step-by-step (play)</button>
        <button id="stopBtn" disabled>Stop</button>
      </div>

      <div class="hint">Tip: Non-alphabet characters are preserved. Shift only affects A‚ÄìZ and a‚Äìz.</div>

      <h3 style="margin-top:18px">Alphabet Mapping</h3>
      <div class="alphabet" id="alphabetRow"></div>

      <h3 style="margin-top:14px">Output</h3>
      <div class="output" id="outputArea">(press Run)</div>

    </div>

    <footer>Built with plain JavaScript ‚Ä¢ Open with Live Server or a local HTTP server.</footer>
  </div>

  <script>
    const A_CODE = 'A'.charCodeAt(0);
    const inputText = document.getElementById('inputText');
    const shiftRange = document.getElementById('shiftRange');
    const shiftValue = document.getElementById('shiftValue');
    const mode = document.getElementById('mode');
    const outputArea = document.getElementById('outputArea');
    const alphabetRow = document.getElementById('alphabetRow');
    const runBtn = document.getElementById('runBtn');
    const stepBtn = document.getElementById('stepBtn');
    const stopBtn = document.getElementById('stopBtn');

    let stepping = false;
    let stepTimer = null;

    function buildAlphabet() {
      alphabetRow.innerHTML = '';
      for (let i = 0; i < 26; i++) {
        const letter = document.createElement('div');
        letter.className = 'letter';
        letter.textContent = String.fromCharCode(A_CODE + i);
        alphabetRow.appendChild(letter);
      }
    }

    function normalizeShift(s){return ((s%26)+26)%26;}

    function applyCaesar(text, shift, modeType='enc'){
      shift = normalizeShift(Number(shift));
      if(modeType==='dec') shift = 26-shift;
      let out='';
      for(let ch of text){
        const code=ch.charCodeAt(0);
        if(code>=65&&code<91){out+=String.fromCharCode(((code-65+shift)%26)+65);}else if(code>=97&&code<123){out+=String.fromCharCode(((code-97+shift)%26)+97);}else{out+=ch;}
      }
      return out;
    }

    function showMappingAnimation(shift, modeType='enc'){
      const s=normalizeShift(shift);
      const letters=alphabetRow.children;
      Array.from(alphabetRow.querySelectorAll('.arrow')).forEach(a=>a.remove());

      for(let i=0;i<26;i++){
        const start=letters[i];
        const endIndex=(modeType==='dec'?i-s+26:i+s)%26;
        const end=letters[endIndex];
        const arrow=document.createElement('div');
        arrow.className='arrow';
        const startRect=start.getBoundingClientRect();
        const endRect=end.getBoundingClientRect();
        const offset=endIndex-i;
        arrow.style.left=`${i*34+14}px`;
        arrow.style.transform=`translateX(${offset*34}px)`;
        alphabetRow.appendChild(arrow);
      }
    }

    function run(){
      const text=inputText.value;
      const s=Number(shiftRange.value);
      const out=applyCaesar(text,s,mode.value);
      outputArea.textContent=out;
      showMappingAnimation(s,mode.value);
    }

    function playSteps(){
      if(stepping) return; stepping=true; stepBtn.disabled=true; stopBtn.disabled=false;
      const text=inputText.value; const s=Number(shiftRange.value); const modeType=mode.value;
      let idx=0; outputArea.textContent=''; showMappingAnimation(s,modeType);

      function doStep(){
        if(!stepping||idx>=text.length){stopSteps();return;}
        const ch=text[idx];
        outputArea.textContent+=applyCaesar(ch,s,modeType);
        idx++;
        stepTimer=setTimeout(doStep,220);
      }
      doStep();
    }

    function stopSteps(){
      stepping=false; stepBtn.disabled=false; stopBtn.disabled=true; clearTimeout(stepTimer);
    }

    shiftRange.addEventListener('input',()=>{shiftValue.textContent=shiftRange.value; showMappingAnimation(shiftRange.value,mode.value);});
    runBtn.addEventListener('click',run);
    stepBtn.addEventListener('click',playSteps);
    stopBtn.addEventListener('click',stopSteps);

    buildAlphabet();
    shiftValue.textContent=shiftRange.value;
    showMappingAnimation(Number(shiftRange.value),mode.value);
  </script>
</body>
</html>
